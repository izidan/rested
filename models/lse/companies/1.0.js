const mongoose = require('mongoose');

const schema = new mongoose.Schema({
  _id: { type: String, description: "Company symbol" },
  name: { type: String, description: "Company name" },
  nominal: { type: Number, description: "Nominal value per share" },
  market: { type: String, description: "LSE market" },
  industry: { type: String, description: "ICB industry" },
  superSector: { type: String, description: "ICB super scetor" },
  startDate: { type: Date, description: "The date the company floated on LSE" },
  webSite: { type: String, description: "Company website" },
  announcementFlag: { type: String, description: "Announcement flag" },
  // Key Figures http://uk.advfn.com/Help/key-figures-88.html
  marketCapM: { type: Number, description: "Total value of a company's issued share capital as determined by its share price in the stock market; it is calculated as the number of ordinary shares in issue multiplied by the previous day's closing share price and is expressed in millions<br/>= (share price * shares in issue) / 100" },
  sharesInIssueM: { type: Number, description: "Current number of ordinary shares in issue and it is expressed in millions" },
  yesterdaysClose: { type: Number, description: "Previous day's closing share price and it is expressed in pence" },
  peRatio: { type: Number, description: "The most widely used investment measure, is calculated as the previous day's closing share price divided by the earnings per share-basic (EPS-basic). PE ratio is used to appraise a company's profit performance. Where a company's prospects are considered by the stock market to be good, then it is likely that the company's share price will rise, producing a higher PE ratio<br/>= share price / EPS-basic" },
  dividendCover: { type: Number, description: "Calculated as the earnings per share-basic (EPS-basic) divided by the annual total dividend amount per share. Dividend cover expresses a company's ability to pay ordinary dividends to shareholders out of profits earned. It shows how many times the ordinary dividend is covered by the profit available and, for example, if a company pays out one quarter of its profit as dividends, then the Dividend cover ratio is four<br/>= EPS-basic / annual dividend per share (DPS)" },
  cashFlowPs: { type: Number, description: "The Operations Cash Flow, i.e. the net cash inflow/outflow from operating activities, divided by the number of ordinary shares in issue, expressed in pence<br/>= (operations cash flow / shares in issue) * 100" },
  roeReturnOnEquityPct: { type: Number, description: "A measure of a firm's profitability, expressed by the return achieved on invested equity capital. The return is therefore taken to be the attributable profit (i.e. profit after tax, minority interests and preference dividends, attributable to ordinary shareholders) and is expressed as a percentage<br/>= (attributable profit / average ord cap, reserves) * 100 " },
  operatingMarginPct: { type: Number, description: "Shows the pre-tax profit as a percentage of turnover for the last reported period<br/>= (pre-tax profit / turnover) * 100" },
  pegFactor: { type: Number, description: "The price-earnings (PE) ratio divided by the earnings per share (EPS) growth rate. The PEG factor measures the relative cost of earnings growth at the previous day's closing share price<br/>= (PE ratio / EPS Growth Rate)<br/>- A PEG factor equal to one, means that the market is pricing the stock to fully reflect its EPS growth potential.<br/>- A PEG factor greater than one, indicates that either the stock is overvalued, or that the market expects its future EPS growth to be greater than the current consensus.<br/>- A PEG factor less than one, indicates that either the stock is undervalued, or that the market does not expect the company to achieve its forcasted EPS growth." },
  earningsPsGrowthRate: { type: Number, description: "A percentage shows the relative growth of EPS over the last two reporting periods. A minus sign indicates negative growth from last year. If the previous year's EPS-basic is zero earnings per share growth rate is not defined<br/>= [(current year's EPS-basic - previous year's EPS-basic) / AbsoluteValue(previous year's EPS-basic)] * 100" },
  dividendPsGrowthRate: { type: Number, description: "A percentage shows the relative growth of DPS over the current period. A minus sign indicates negative growth. If the previous year's DPS is zero, dividends per share growth rate is not defined<br/>= [(current year's DPS - previous year's DPS) / previous year's DPS] * 100" },
  netDebtM: { type: Number, description: "Total liabilities minus cash & equivalents. The formula is the following and the figures are expressed in millions<br/>= total liabilities - cash & equivalents" },
  gearingGrossPct: { type: Number, description: "Total Debt (short-term and long-term) as a percentage of the Total of Shareholders' funds and Debt funds<br/>= [(creditors, short + creditors, long + creditors, other + subordinated loans + insurance funds) / (ord cap, reserves + prefs, minorities + creditors, short + creditors, long + creditors, other + subordinated loans + insurance funds)] * 100<br/>= [TOTAL LIABILITIES / TOTAL ASSETS] * 100" },
  quickAssetsM: { type: Number, description: "The total of current assets excluding stocks, expressed in millions<br/>= debtors + cash & equivalents + current assets, other" },
  netWorkingCapitalM: { type: Number, description: "Current Assets minus Current Liabilities. Current assets include stocks, debtors, cash & equivalents and other current assets. Current liabilities include all the short-term borrowings<br/>= (stocks + debtors + cash & equivalents + current assets, other) - creditors, short" },
  intangiblesToFixedAssetsPct: { type: Number, description: "Measures the proportion of Intangibles in the total of Fixed Assets, i.e. the tangible fixed assets, intangibles and fixed investments<br/>= [intangibles / (fixed assets + intangibles + fixed investment)] * 100" },
  turnoverPs: { type: Number, description: "The turnover divided by the number of ordinary shares in issue, expressed in pence<br/>= (turnover / shares in issue) * 100" },
  preTaxProfitPs: { type: Number, description: "The pre-tax profit divided by the number of ordinary shares in issue, exressed in pence<br/>= (pre tax profit / shares in issue) * 100" },
  retainedProfitPs: { type: Number, description: "The retained profit divided by the number of ordinary shares in issue<br/>= (retained profit / shares in issue) * 100" },
  cashPs: { type: Number, description: "Cash & equivalents divided by the number of ordinary shares in issue, expressed in pence<br/>= (cash & equivalents / shares in issue) * 100" },
  netCashPs: { type: Number, description: "Cash & equivalents minus short-term borrowings. Negative value indicates net short-term borrowings. The value is then divided by the number of ordinary shares in issue and is expressed in pence<br/>= [(cash & equivalents - creditors, short) / shares in issue] * 100" },
  netTangibleAssetValuePs: { type: Number, description: " Shareholders' funds attributable to equity interests minus Intangibles, divided by the number of shares in issue and it is expressed in pence<br/>= [(ord cap, reserves - intangibles) / shares in issue] * 100" },
  netAssetValuePs: { type: Number, description: " Shareholders' funds attributable to equity interests divided by the number of shares in issue. Net assets is the total assets less the total liabilities i.e. the total shareholders funds plus preferences and minority interests and is expressed in pence<br/>= (total equity / shares in issue) * 100" },
  spread: { type: Number, description: "Difference between the bid price and the offer price" },
  dividendYield: { type: Number, description: "" },
  netAssetsValueBasic: { type: Number, description: "" },
  netAssetsValueDiluted: { type: Number, description: "" },
  // Market Value http://uk.advfn.com/Help/investment-ratios-market-value-analysi-314.html
  pqRatio: { type: Number, description: "A measure of how expensive the cashflow that a company generates is, compared to its market price, then adjusted to reflect its degree of gearing, and finally adjusted to account for its amount of intangibles. The greater the value of this ratio, the more expensive a company is<br/>= (share price/cashflow PS) * [(total liabilities / (total assets - intangibles)] * Exponential(intangibles / total fixed assets)" },
  tobinsQRatio: { type: Number, description: "The market value of a company's assets divided by their replacement value. Replacement value being the current cost of replacing the firms assets. This ratio is named after Nobel Economics Laureate James Tobin of Yale University. He hypothesized that the combined market value of all the companies on the stock market should be about equal to their replacement costs. In other words, the ratio of all the combined stock market valuations to the combined replacement costs should be around one<br/>= market cap. / average total assets" },
  tobinsQRatioExclIntangibles: { type: Number, description: "The market value of a firm's assets divided by their replacement value. This figure excludes intangibles<br/> = market cap. / average (total assets - intangibles)" },
  dividendYield: { type: Number, description: "The annual total dividend amount as a proportion of the share price<br/>= (annual dividend per share / share price) * 100" },
  marketToBookRatio: { type: Number, description: "The ratio of the current share price to the book value per share. It measures how much a company worths at present, in comparison with the amount of capital invested by current and past shareholders into it<br/>= market capitalisation / ord cap, reserves<br/>= share price / NAV per share-basic" },
  priceToPreTaxProfitPs: { type: Number, description: "The company's market capitalisation divided by the pre-tax profit<br/>= market cap. / pre tax profit<br/>= shareprice / pre-tax profit PS" },
  priceToRetainedProfitPs: { type: Number, description: "The company's market capitalisation divided by the retained profit<br/>= market cap. / retained profit<br/>= shareprice / retained profit PS" },
  priceToCashFlowPs: { type: Number, description: "Calculated as the previous day's closing share price divided by cash flow per share. It can also be defined as market capitalisation divided by operations cash flow<br/>= market cap. / operations cash flow<br/>= share price / cash flow PS" },
  priceToSales: { type: Number, description: "Calculated as the previous day's closing share price divided by turnover per share. It can also be defined as market capitalisation divided by turnover<br/>= market cap. / turnover<br/>= share price / turnover PS " },
  priceToTangibleBookValue: { type: Number, description: "Calculated as the previous day's closing share price divided by net tangible asset value (NTAV) per share<br/>= market cap. / (ord cap, reserves + pref, minorities - intangibles)<br/>= share price / NTAV PS" },
  priceToCashPs: { type: Number, description: "Calculated as the previous day's closing share price divided by total cash per share. It can also be defined as market capitalisation divided by cash & equivalents<br/> = market cap. / cash & equivalents<br/>= share price / cash PS" },
  netWorkingCapitalPs: { type: Number, description: "The net working capital per share<br/>= net working capital / shares in issue" },
  priceToWorkingCapitalPs: { type: Number, description: "The price of a share shown as a percentage of the net working capital per share<br/>= share price / net working capital / shares in issue" },
  averagePe: { type: Number, description: "The average of the yearly PE ratio values, taking into account only the years with a positive PE ratio" },
  earningsYield: { type: Number, description: "The inverse of the PE Ratio (1 / PE Ratio)<br/>= earnings (EPS basic) / price (per share)" },
  yearsInPeAverage: { type: Number, description: "The number of years taken into account when calculating the Average PE. These years will not necessarily be consecutive, only years with a positive PE ratio will be included" },
  peAsPctOfPeAverage: { type: Number, description: "The current PE ratio as a percentage of the Average PE<br/>= (PE ratio / average PE) x 100" },
  // Profitability Ratios http://uk.advfn.com/Help/operating-ratios-profitability-ratios-313.html
  returnOnCapitalEmployedRoce: { type: Number, description: "Measures the profitability of a company by the pre-tax profit achieved on a company's capital employed. The capital employed is taken to be the net operating assets (i.e. fixed assets plus net working capital)<br/>= [pre-tax profit / average (total assets - creditors short)] * 100" },
  returnOnAssetsPct: { type: Number, description: "Measures the return achieved on a company's total assets. The return is taken to be the attributable profit (i.e. profit after tax, minority interests and preference dividends, attributable to ordinary shareholders)<br/>= (attributable profit / average total assets) * 100" },
  netProfitMargin: { type: Number, description: "Shows the attributable profit as a percentage of turnover for the last reported period<br/>= (attributable profit / turnover) * 100" },
  assetTurnover: { type: Number, description: "The company's turnover to total assets<br/>= turnover / average total assets" },
  roiReturnOnInvestmentsPct: { type: Number, description: "Measures of a company's profitability equal to the profit attributable to ordinary shareholders divided by the average ordinary and preferred capital plus long-term debt. ROI measures how effectively the firm uses its capital to generate profit; the higher the ROI, the better<br/>= [attributable profit / average (ordinary capital & reserves + prefs & minorities + creditors,long + creditors,other + subordinated loans + insurance funds)] * 100<br/>= [attributable profit / average (long-term capital + equity)] * 100" },
  dividendPayoutRatio: { type: Number, description: "Measures the proportion of earnings that is paid out as dividends<br/>= (total annual dividend / EPS-basic) * 100" },
  plowbackRatioPct: { type: Number, description: "Shows the proportion of earnings not paid out as dividends, which is plowed back into the business<br/>= (retained profit PS / EPS-basic) * 100" },
  growthFromPlowbackRatio: { type: Number, description: "The Plowback ratio multiplied by the Return on Equity (ROE). It measures roughly how rapidly the shareholders' investment is growing on an annual basis as a result of plowback<br/>= plowback ratio * ROE <br/>= [((EPS-basic - total annual dividend) / EPS-basic) * (attributable profit / average total ordinary capital & reserves)] * 100" },
  netIncomeOfRevenuesPct: { type: Number, description: "The retained profit divided by the turnover of the company<br/>= (retained profit / turnover) * 100" },
  // Asset Utilisation http://uk.advfn.com/Help/operating-ratios-asset-utilisation-mul-315.html
  shareholdersEquityTurnover: { type: Number, description: "Shows how many sales we get from each pound of capital invested in the company<br/>= turnover / average ord cap, reserves" },
  fixedAssetsTurnover: { type: Number, description: "Shows how hard the company's fixed assets are being put to use<br/>= turnover / average (fixed assets + intangibles + fixed investments)" },
  currentAssetsTurnover: { type: Number, description: "Shows the productivity of the the company's current assets<br/>= turnover / average (current assets,other + stocks + debtors + cash & equivalents)" },
  netWorkingCapitalTurnover: { type: Number, description: "The turnover divided by the net current assets (or net working capital) of the company<br/>= turnover / average (current assets, other + stocks + debtors + cash & equivalents - creditors short) " },
  inventoryTurnover: { type: Number, description: "The turnover of the company divided by its stocks<br/>= turnover / average stocks" },
  // Operating Ratios http://uk.advfn.com/Help/operating-ratios-others-316.html
  totalAssetsToSales: { type: Number, description: "The total assets divided by the turnover of the company. Roughly speaking, it shows how many pounds need to be employed by the company in order to create one pound of sales<br/>= average total assets / turnover" },
  debtorsToSales: { type: Number, description: "The debtors divided by the turnover of the company. This ratio demonstrates what percentage of credit the company gives on its sales<br/>= (average debtors / turnover) * 100 " },
  debtCollectionPeriod: { type: Number, description: "The year's sales which were outstanding at the balance sheet date, expresse in days. A rough measure of the days of credit that a firm's offers to its suppliers/clients<br/>= (average debtors / turnover) * 365" },
  // Leverage Ratios http://uk.advfn.com/Help/financial-ratios-leverage-ratios-317.html
  debtRatio: { type: Number, description: "" },
  debtToEquityRatio: { type: Number, description: "" },
  debtToEquityRatioExclIntangibles: { type: Number, description: "" },
  debtToEquityMarketValue: { type: Number, description: "" },
  netGearingPct: { type: Number, description: "" },
  netGearingPctExclIntangibles: { type: Number, description: "" },
  grossGearingPctExclIntangibles: { type: Number, description: "" },
  gearingUnder1YearPct: { type: Number, description: "" },
  gearingUnder1YearPctExclIntangibles: { type: Number, description: "" },
  assetsToEquity: { type: Number, description: "" },
  cashToEquity: { type: Number, description: "" },
  gearingGrossPct: { type: Number, description: "" },
  // Liquidity Ratios http://uk.advfn.com/Help/financial-ratios-liquidity-ratios-318.html
  netWorkingCapitalToTotalAssetsPct: { type: Number, description: "" },
  currentRatio: { type: Number, description: "" },
  quickRatioAcidTest: { type: Number, description: "" },
  liquidityRatio: { type: Number, description: "" },
  cashAndEquivToCurrentAssetsPct: { type: Number, description: "" },
  // Solvency Ratios http://uk.advfn.com/Help/financial-ratios-solvency-ratios-319.html
  enterpriseValue: { type: Number, description: "" },
  cfoToSales: { type: Number, description: "" },
  cfoToAttributableProfit: { type: Number, description: "" },
  cfoToAssets: { type: Number, description: "" },
  cfoToDebt: { type: Number, description: "" },
  totalDebtToEquityMarketValue: { type: Number, description: "" },
  totalDebtToSales: { type: Number, description: "" },
  totalDebtToPreTaxProfit: { type: Number, description: "" },
  totalDebt: { type: Number, description: "" },
  totalDebtToNetCurrentAssets: { type: Number, description: "" },
  commonEquityToAssetsPct: { type: Number, description: "" },
  intangiblesToTotalAssetsPct: { type: Number, description: "" },
  // Dodds-Graham Ratios http://uk.advfn.com/Help/financial-ratios-dodds-graham-ratios-2376.html
  '3YearCompoundEarningsGrowth': { type: Number, description: "" },
  '5YearCompoundEarningsGrowth': { type: Number, description: "" },
  '10YearCompoundEarningsGrowth': { type: Number, description: "" },
  noOf5PctEarningsDropsInLast10Yr: { type: Number, description: "" },
  // Price Performance
  lowWeek: { type: Number, description: "" },
  lowMonth: { type: Number, description: "" },
  lowQuarter: { type: Number, description: "" },
  lowYear: { type: Number, description: "" },
  highWeek: { type: Number, description: "" },
  highMonth: { type: Number, description: "" },
  highQuarter: { type: Number, description: "" },
  highYear: { type: Number, description: "" },
  changeFromLowWeek: { type: Number, description: "" },
  changeFromLowMonth: { type: Number, description: "" },
  changeFromLowQuarter: { type: Number, description: "" },
  changeFromLowYear: { type: Number, description: "" },
  changeFromHighWeek: { type: Number, description: "" },
  changeFromHighMonth: { type: Number, description: "" },
  changeFromHighQuarter: { type: Number, description: "" },
  changeFromHighYear: { type: Number, description: "" },
  qtr90DaysOpenPrice: { type: Number, description: "" },
  '180DaysOpenPrice': { type: Number, description: "" },
  '1YrOpenPrice': { type: Number, description: "" },
  '3YrOpenPrice': { type: Number, description: "" },
  '5YrOpenPrice': { type: Number, description: "" },
  changeFromQtrOpenPrice: { type: Number, description: "" },
  changeFrom180DaysOpenPrice: { type: Number, description: "" },
  changeFrom1YrOpenPrice: { type: Number, description: "" },
  changeFrom3YrOpenPrice: { type: Number, description: "" },
  changeFrom5YrOpenPrice: { type: Number, description: "" },
  pcChangeFromQtrOpenPrice: { type: Number, description: "" },
  pcChangeFrom180DaysOpenPrice: { type: Number, description: "" },
  pcChangeFrom1YrOpenPrice: { type: Number, description: "" },
  pcChangeFrom3YrOpenPrice: { type: Number, description: "" },
  pcChangeFrom5YrOpenPrice: { type: Number, description: "" },
  // Price Information
  spreadPct: { type: Number, description: "" },
  bid: { type: Number, description: "" },
  offer: { type: Number, description: "" },
  open: { type: Number, description: "" },
  high: { type: Number, description: "" },
  low: { type: Number, description: "" },
  volume: { type: Number, description: "" },
  currentPrice: { type: Number, description: "" },
  priceChange: { type: Number, description: "" },
  percentageChange: { type: Number, description: "" },
  lastTradePrice: { type: Number, description: "" },
  lastTradeTime: { type: Number, description: "" },
  lastTradeVolume: { type: Number, description: "" },
  // Stock Information http://uk.advfn.com/Help/stock-information-122.html
  resultPeriodEndDate: { type: Number, description: "" },
  resultsDatePrevious: { type: Number, description: "" },
  marketSector: { type: String, description: "" },
  marketSegment: { type: String, description: "" },
  industryName: { type: String, description: "" },
  isin: { type: String, description: "" },
  // Key Financials
  cashAndEquivalentsM: { type: Number, description: "" },
  currentAssetsOtherM: { type: Number, description: "" },
  debtorsM: { type: Number, description: "" },
  fixedAssetsM: { type: Number, description: "" },
  fixedInvestmentsM: { type: Number, description: "" },
  intangiblesM: { type: Number, description: "" },
  stocksM: { type: Number, description: "" },
  totalAssetsM: { type: Number, description: "" },
  creditorsShortM: { type: Number, description: "" },
  creditorsLongM: { type: Number, description: "" },
  totalLiabilitiesM: { type: Number, description: "" },
  ordinaryCapitalReservesM: { type: Number, description: "" },
  prefsMonoritiesM: { type: Number, description: "" },
  totalEquityM: { type: Number, description: "" },
  operationsM: { type: Number, description: "" },
  preFinancingM: { type: Number, description: "" },
  retainedCashM: { type: Number, description: "" },
  creditorsOtherM: { type: Number, description: "" },
  subordinatedLoansM: { type: Number, description: "" },
  insuranceFundsM: { type: Number, description: "" },
  // Profit and Loss http://uk.advfn.com/Help/profit-and-loss-account-128.html
  turnoverM: { type: Number, description: "" },
  profitPreTaxM: { type: Number, description: "" },
  attributableProfit: { type: Number, description: "" },
  profitRetainedM: { type: Number, description: "" },
  earningsPsBasic: { type: Number, description: "" },
  earningsPsDiluted: { type: Number, description: "" },
  earningsPsBasicPrevious: { type: Number, description: "" },
  dps: { type: Number, description: "" }
}, {
  id: false,
  versionKey: false
});

module.exports = mongoose.attach(process.env.LSEDB, 'lse_company_1.0.0', schema, 'advfn');